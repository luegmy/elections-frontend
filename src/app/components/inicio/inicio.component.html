<div class="inicio-container">
  <div *ngIf="!showDetail" class="search-wrap">
    <div class="peru-frame">
      <div class="watermark-pe">PE</div>
      
      <textarea 
        [(ngModel)]="searchQuery"
        (keydown)="onKeyPress($event)"
        placeholder="Ejemplos: lavados, derogacion, sentencias..."
        [disabled]="loading"
        class="compact-textarea"
        rows="3"
      ></textarea>

      <button 
        class="btn-search-action"
        (click)="onSearch()" 
        [disabled]="!isQueryValid || loading"
      >
        <span *ngIf="!loading">ANALIZAR</span>
        <span *ngIf="loading">...</span>
      </button>
    </div>
  </div>

  <div class="content-area">
    <div *ngIf="!showDetail" class="list-view">
      
      <div *ngIf="loading" class="state-msg">
        <div class="loader-peru"></div>
        <p>Procesando información electoral...</p>
      </div>

      <div *ngIf="error" class="state-msg error">
        <p>⚠️ {{ error }}</p>
        <button (click)="onSearch()" class="retry-link">Reintentar</button>
      </div>

      <app-lista-candidatos 
        *ngIf="searchResults.length > 0 && !loading"
        [searchResults]="searchResults"
        (candidateSelected)="onCandidateSelected($event)">
      </app-lista-candidatos>

      <div *ngIf="searchResults.length === 0 && !loading && hasSearched" class="state-msg">
        <p>No se encontraron candidatos con esos criterios.</p>
        <button (click)="clearSearch()" class="clear-link">Nueva búsqueda</button>
      </div>
    </div>

    <div *ngIf="showDetail && selectedCandidate" class="detail-view">
      <app-detalle-candidato 
        [candidate]="selectedCandidate"
        (backToList)="onBackToList()">
      </app-detalle-candidato>
    </div>
  </div>
</div>