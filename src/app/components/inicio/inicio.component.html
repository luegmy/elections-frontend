<div class="inicio-container">
  <div class="content-area">
    <div *ngIf="!showDetail" class="list-view">
      
      <div class="ayuda-filtro" *ngIf="!loading">
        <div class="pilares-container">
          <div class="pilar-col t-judicial">
            <span class="pilar-head">âš–ï¸ <b>Integridad</b></span>
            <span class="pilar-desc">Â¿Tiene juicios o denuncias?</span>
          </div>
          <div class="pilar-col t-plan">
            <span class="pilar-head">ğŸ“ˆ <b>Plan</b></span>
            <span class="pilar-desc">Â¿Es viable lo que promete?</span>
          </div>
          <div class="pilar-col t-transparencia">
            <span class="pilar-head">ğŸ’ <b>Transparencia</b></span>
            <span class="pilar-desc">Â¿Su dinero es transparente?</span>
          </div>
          <div class="pilar-col t-confianza">
            <span class="pilar-head">ğŸ¤ <b>Confianza</b></span>
            <span class="pilar-desc">Â¿Es fiel a sus principios?</span>
          </div>
          <div class="pilar-col t-logros">
            <span class="pilar-head">ğŸ† <b>Logros</b></span>
            <span class="pilar-desc">Â¿QuÃ© hizo por el paÃ­s?</span>
          </div>
        </div>
      </div>

      <div *ngIf="!showDetail" class="search-wrap">
        <div class="peru-frame">
          <div class="watermark-pe">PE</div>
          <textarea 
            [(ngModel)]="searchQuery" 
            (keydown)="onKeyPress($event)" 
            placeholder="Busca candidatos, antecedentes o propuestas (ej: 'Seguridad', 'Derogacion', 'Lavado')..." 
            [disabled]="loading" 
            class="compact-textarea" 
            rows="3">
          </textarea>
          <button 
            class="btn-search-action" 
            (click)="onSearch()" 
            [disabled]="searchQuery.length <= 3 || loading">
            <span *ngIf="!loading">ANALIZAR</span>
            <span *ngIf="loading">...</span>
          </button>
        </div>
      </div>

      <div *ngIf="loading" class="state-msg">
        <div class="loader-peru"></div>
        <p>Procesando informaciÃ³n electoral...</p>
      </div>

      <div *ngIf="error" class="state-msg error">
        <p>âš ï¸ {{ error }}</p>
        <button (click)="onSearch()" class="retry-link">Reintentar</button>
      </div>

      <app-lista-candidatos *ngIf="searchResults.length > 0 && !loading" [searchResults]="searchResults" (candidateSelected)="onCandidateSelected($event)"></app-lista-candidatos>

      <div *ngIf="searchResults.length === 0 && !loading && hasSearched" class="state-msg no-results">
        <div class="no-results-icon">ğŸ“‚</div>
        <p>No se encontraron candidatos con esos criterios.</p>
        <button (click)="clearSearch()" class="clear-link">Nueva bÃºsqueda</button>
      </div>
    </div>

    <div *ngIf="showDetail && selectedCandidate" class="detail-view">
      <app-detalle-candidato [candidate]="selectedCandidate" (backToList)="onBackToList()"></app-detalle-candidato>
    </div>
  </div>
</div>